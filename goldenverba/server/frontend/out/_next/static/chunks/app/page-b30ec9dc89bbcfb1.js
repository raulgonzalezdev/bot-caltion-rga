(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8266:function(e,t,s){Promise.resolve().then(s.bind(s,14923))},14923:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return em}});var l=s(57437),o=s(2265),n=s(58177),r=s(30505),a=s(8603),i=s(14063),c=s(97223),d=e=>{let{Icon:t,iconSize:s,title:o,currentPage:n,setPage:r,setCurrentPage:a,APIHost:i,hide:c}=e;return(0,l.jsxs)("button",{disabled:null===i,className:"btn md:btn-sm lg:btn-md ".concat(c?"hidden":"flex"," flex-grow items-center justify-center border-none hover:bg-button-hover-verba ").concat(n===r?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{a(r)},children:[(0,l.jsx)(t,{size:s}),(0,l.jsx)("p",{className:"md:text-xs lg:text-sm sm:hidden md:flex",children:o})]},o)};async function x(){try{let e=await fetch("https://api.github.com/repos/weaviate/verba",{method:"GET"}),t=await e.json();if(t)return t.stargazers_count;return 0}catch(e){return console.error("Failed to perform search:",e),0}}let g=e=>e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString();var m=e=>{let{imageSrc:t,title:s,subtitle:m,APIHost:u,version:b,currentPage:p,setCurrentPage:h,production:f}=e,[v,j]=(0,o.useState)("0");(0,o.useEffect)(()=>{(async()=>{try{let e=await x();if(e){let t=g(e);j(t)}}catch(e){console.error("Failed to fetch GitHub stars:",e)}})()},[]);let y=()=>{window.open("https://laboratoriosbernabo.com/","_blank","noopener,noreferrer")};return(0,l.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,l.jsx)("img",{src:t,width:80,className:"flex"}),(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-center lg:gap-3",children:[(0,l.jsx)("p",{className:"sm:text-2xl md:text-3xl text-text-verba",children:s}),(0,l.jsx)("p",{className:"sm:text-sm text-base text-text-alt-verba font-light",children:m})]})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,l.jsx)("div",{className:"hidden sm:h-[3vh] lg:h-[5vh] bg-text-alt-verba w-px sm:mx-2 md:mx-4"}),(0,l.jsxs)("div",{className:"lg:flex hidden lg:flex-row items-center lg:gap-3 justify-between",children:[(0,l.jsx)("div",{className:" ".concat(f?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,l.jsx)(d,{hide:!1,APIHost:u,Icon:n.utr,iconSize:18,title:"Chat",currentPage:p,setCurrentPage:h,setPage:"CHAT"}),(0,l.jsx)(d,{hide:!1,APIHost:u,Icon:n.emU,iconSize:18,title:"Documentos",currentPage:p,setCurrentPage:h,setPage:"DOCUMENTS"}),(0,l.jsx)(d,{hide:f,APIHost:u,Icon:r.lLR,iconSize:18,title:"Descripci\xf3n general",currentPage:p,setCurrentPage:h,setPage:"STATUS"}),(0,l.jsx)("div",{className:" ".concat(f?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,l.jsx)(d,{hide:f,APIHost:u,Icon:a.Lgw,iconSize:18,title:"A\xf1adir Documentos",currentPage:p,setCurrentPage:h,setPage:"ADD"}),(0,l.jsx)(d,{hide:f,APIHost:u,Icon:n.LTV,iconSize:18,title:"RAG",currentPage:p,setCurrentPage:h,setPage:"RAG"}),(0,l.jsx)(d,{hide:f,APIHost:u,Icon:n.zfW,iconSize:18,title:"Configuracion",currentPage:p,setCurrentPage:h,setPage:"SETTINGS"}),(0,l.jsx)("div",{className:"sm:h-[3vh] lg:h-[5vh] mx-1 hidden sm:block bg-text-alt-verba w-px"}),(0,l.jsxs)("button",{className:"md:hidden btn md:btn-sm lg:btn-md lg:flex items-center justify-center border-none bg-secondary-verba hover:bg-button-hover-verba",onClick:y,children:[(0,l.jsx)(i.hJX,{size:18,className:"text-text-verba"}),(0,l.jsx)("p",{className:"text-xs sm:hidden md:flex text-text-verba ",children:v})]}),(0,l.jsx)("p",{className:"hidden lg:flex text-xs text-text-alt-verba",children:b})]}),(0,l.jsx)("div",{className:"flex flex-row items-center sm:gap-1 lg:gap-5 justify-between",children:(0,l.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,l.jsx)("ul",{className:"menu md:menu-md sm:menu-sm sm:menu-horizontal bg-base-200 rounded-box bg-bg-alt-verba z-50",children:(0,l.jsx)("li",{children:(0,l.jsxs)("details",{children:[(0,l.jsx)("summary",{children:(0,l.jsx)(c.bqP,{size:20})}),(0,l.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,l.jsx)("li",{onClick:e=>{h("CHAT")},children:(0,l.jsx)("a",{children:"Chat"})}),(0,l.jsx)("li",{onClick:e=>{h("DOCUMENTS")},children:(0,l.jsx)("a",{children:"Documents"})}),!f&&(0,l.jsx)("li",{onClick:e=>{h("STATUS")},children:(0,l.jsx)("a",{children:"Status"})}),!f&&(0,l.jsx)("li",{onClick:e=>{h("ADD")},children:(0,l.jsx)("a",{children:"Add Documents"})}),!f&&(0,l.jsx)("li",{onClick:e=>{h("RAG")},children:(0,l.jsx)("a",{children:"RAG"})}),!f&&(0,l.jsx)("li",{onClick:e=>{h("SETTINGS")},children:(0,l.jsx)("a",{children:"Settings"})}),(0,l.jsx)("li",{onClick:y,children:(0,l.jsx)("a",{children:"Bernabo Home"})}),(0,l.jsx)("li",{className:"items-center justify-center text-xs text-text-alt-verba mt-2",children:b})]})]})})})})})]})]})};let u=["Inter","Plus_Jakarta_Sans","Open_Sans","PT_Mono"],b={value:"Plus_Jakarta_Sans",type:"select",options:u,description:"Text Font"},p={title:"Configuraciones de chat",description:"Personalice la configuraci\xf3n del chat, como almacenar en cach\xe9 las respuestas generadas, o permita que le brinde sugerencias de autocompletar",settings:{caching:{checked:!0,type:"check",description:"Habilitar almacenamiento en cach\xe9"},suggestion:{checked:!0,type:"check",description:"Habilitar autocompletado"},info_button:{checked:!0,type:"check",description:"Habilitar informaci\xf3n de ayuda"},max_document_size:{value:1e4,type:"number",description:"M\xe1ximo de caracteres para mostrar documentos"}}},h={Default:{Customization:{title:"Customization",description:"Personaliza el dise\xf1o de tu Bernabo Bot cambiando el t\xedtulo, subt\xedtulo, logotipo y colores de la aplicaci\xf3n.",settings:{title:{text:"Bernabo",type:"text",description:"T\xedtulo de la p\xe1gina"},subtitle:{text:"Laboratorio Bernabo",type:"text",description:"Subt\xedtulo de la p\xe1gina"},intro_message:{text:"Bienvenido al asistente AI de Laboratorios Bernabó",type:"text",description:"Mensaje de introducci\xf3n"},placeholder_message:{text:"¡Pregúntale cualquier cosa a Bernabo Bot!",type:"text",description:"Marcador de posici\xf3n de entrada"},image:{src:"https://raw.githubusercontent.com/raulgonzalezdev/bot-caltion-rga/main/img/icon.png",type:"image",description:"Logotipo de la P\xe1gina"},primary_color:{color:"#91d4ff",type:"color",description:"Primary Color"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary Color"},warning_color:{color:"#FF8399",type:"color",description:"Accent Color"},bg_color:{color:"#FEF7F7",type:"color",description:"Background Color"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alternative Background Color"},text_color:{color:"#161616",type:"color",description:"Text Color"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alternative Text Color"},button_color:{color:"#EFEFEF",type:"color",description:"Button Color"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:b,theme:"light"}},Chat:p},DarkMode:{Customization:{title:"Customization",description:"Personaliza el dise\xf1o de tu Bernabo Bot cambiando el t\xedtulo, subt\xedtulo, logotipo y colores de la aplicaci\xf3n.",settings:{title:{text:"Bernabo",type:"text",description:"T\xedtulo de la p\xe1gina"},subtitle:{text:"Laboratorio Bernabo",type:"text",description:"Subt\xedtulo de la p\xe1gina"},intro_message:{text:"Welcome to the dark mode version of Verba! Spooky, right?",type:"text",description:"Mensaje de introducci\xf3n"},placeholder_message:{text:"Ask anything!",type:"text",description:"Marcador de posici\xf3n de entrada"},image:{src:"https://raw.githubusercontent.com/raulgonzalezdev/bot-caltion-rga/main/img/icon.png",type:"image",description:"Logotipo de la P\xe1gina"},primary_color:{color:"#BB86FC",type:"color",description:"Primary Color"},secondary_color:{color:"#008F82",type:"color",description:"Secondary Color"},warning_color:{color:"#FF8399",type:"color",description:"Accent Color"},bg_color:{color:"#202020",type:"color",description:"Background Color"},bg_alt_color:{color:"#2F2929",type:"color",description:"Alternative Background Color"},text_color:{color:"#ffffff",type:"color",description:"Text Color"},text_alt_color:{color:"#999999",type:"color",description:"Alternative Text Color"},button_color:{color:"#3C3C3C",type:"color",description:"Button Color"},button_hover_color:{color:"#2C2C2C",type:"color",description:"Button Hover Color"},bg_console:{color:"#2F2929",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:{value:"Open_Sans",type:"select",options:u,description:"Text Font"},theme:"dark"}},Chat:p},Weaviate:{Customization:{title:"Customization",description:"Personaliza el dise\xf1o de tu Bernabo Bot cambiando el t\xedtulo, subt\xedtulo, logotipo y colores de la aplicaci\xf3n.",settings:{title:{text:"Weaviate Verba",type:"text",description:"T\xedtulo de la p\xe1gina"},subtitle:{text:"Chatbot for Weaviate",type:"text",description:"Subt\xedtulo de la p\xe1gina"},intro_message:{text:"Welcome to Weaviate, your AI-Native vector database. How can I help you with Weaviate today?",type:"text",description:"Mensaje de introducci\xf3n"},placeholder_message:{text:"Ask all questions related to Weaviate",type:"text",description:"Marcador de posici\xf3n de entrada"},image:{src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true",type:"image",description:"Logotipo de la P\xe1gina"},primary_color:{color:"#6BDF4A",type:"color",description:"Primary Color"},secondary_color:{color:"#7AD6EB",type:"color",description:"Secondary Color"},warning_color:{color:"#F4404E",type:"color",description:"Accent Color"},bg_color:{color:"#EDEDED",type:"color",description:"Background Color"},bg_alt_color:{color:"#ffffff",type:"color",description:"Alternative Background Color"},text_color:{color:"#130C49",type:"color",description:"Text Color"},text_alt_color:{color:"#8196A6",type:"color",description:"Alternative Text Color"},button_color:{color:"#E6E3E3",type:"color",description:"Button Color"},button_hover_color:{color:"#FFFFFF",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:{value:"Inter",type:"select",options:u,description:"Text Font"},theme:"light"}},Chat:p},SanaMaxima:{Customization:{title:"Customization",description:"Personaliza el dise\xf1o de tu Bernabo Bot cambiando el t\xedtulo, subt\xedtulo, logotipo y colores de la aplicaci\xf3n.",settings:{title:{text:"Prinses Maxima Centrum",type:"text",description:"T\xedtulo de la p\xe1gina"},subtitle:{text:"Medical RAG",type:"text",description:"Subt\xedtulo de la p\xe1gina"},intro_message:{text:"Welcome to Medical Retrieval Augmented Generation! We ingested medical data, like clinical reports, research and more to improve access to healthcare. Try it out by asking questions related to diseases, symptoms and medical conditions.",type:"text",description:"Mensaje de introducci\xf3n"},placeholder_message:{text:"Ask a medical question",type:"text",description:"Marcador de posici\xf3n de entrada"},image:{src:"https://www.prinsesmaximacentrum.nl/img/logo/prinses-maxima-centrum-logo-en.svg",type:"image",description:"Logotipo de la P\xe1gina"},primary_color:{color:"#FF963F",type:"color",description:"Primary Color"},secondary_color:{color:"#53E797",type:"color",description:"Secondary Color"},warning_color:{color:"#F11F78",type:"color",description:"Accent Color"},bg_color:{color:"#F1F1F1",type:"color",description:"Background Color"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alternative Background Color"},text_color:{color:"#000F1D",type:"color",description:"Text Color"},text_alt_color:{color:"#818181",type:"color",description:"Alternative Text Color"},button_color:{color:"#E4E4E4",type:"color",description:"Button Color"},button_hover_color:{color:"#CCCCCC",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:{value:"Open_Sans",type:"select",options:u,description:"Text Font"},theme:"light"}},Chat:p},Custom:{Customization:{title:"Customization",description:"Personaliza el dise\xf1o de tu Bernabo Bot cambiando el t\xedtulo, subt\xedtulo, logotipo y colores de la aplicaci\xf3n.",settings:{title:{text:"My RAG",type:"text",description:"T\xedtulo de la p\xe1gina"},subtitle:{text:"Powered by Weaviate",type:"text",description:"Subt\xedtulo de la p\xe1gina"},intro_message:{text:"Bienvenido al asistente AI de Laboratorios Bernabó",type:"text",description:"Mensaje de introducci\xf3n"},placeholder_message:{text:"¡Pregúntale cualquier cosa a Bernabo Bot!",type:"text",description:"Marcador de posici\xf3n de entrada"},image:{src:"https://raw.githubusercontent.com/raulgonzalezdev/bot-caltion-rga/main/img/icon.png",type:"image",description:"Logotipo de la P\xe1gina"},primary_color:{color:"#91d4ff",type:"color",description:"Primary Color"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary Color"},warning_color:{color:"#FF8399",type:"color",description:"Accent Color"},bg_color:{color:"#FEF7F7",type:"color",description:"Background Color"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alternative Background Color"},text_color:{color:"#161616",type:"color",description:"Text Color"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alternative Text Color"},button_color:{color:"#EFEFEF",type:"color",description:"Button Color"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:b,theme:"light"}},Chat:p}};var f=s(65125),v=e=>{let{title:t,TextFieldSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow",placeholder:t,value:n[o].settings[t].text,onChange:e=>{let s=e.target.value;r(e=>{let l=JSON.parse(JSON.stringify(e));return l[o].settings[t].text=s,l})}})})})]},t)},j=e=>{let{title:t,ImageFieldSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col justify-center gap-1",children:[(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"flex justify-center items-center mt-4",children:(0,l.jsx)("img",{src:n[o].settings[t].src,alt:"Logo",className:"max-w-xs max-h-32 rounded-xl"})}),(0,l.jsxs)("div",{className:"flex justify-center items-center mt-1",children:[(0,l.jsx)("button",{onClick:()=>{var e;return null===(e=document.getElementById("LogoImageInput"))||void 0===e?void 0:e.click()},className:"btn border-none text-xs bg-bg-verba text-text-alt-verba",children:"A\xf1adir Logotipo"}),(0,l.jsx)("input",{id:"LogoImageInput",type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let s=new FileReader;s.onload=e=>{r(s=>{var l;let n=JSON.parse(JSON.stringify(s));return n[o].settings[t].src=null===(l=e.target)||void 0===l?void 0:l.result,n})},s.readAsDataURL(e.target.files[0])}},className:"hidden"})]})]})})]},t)},y=s(73478),N=e=>{let{title:t,ColorSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e,a=e=>{r(s=>{let l=JSON.parse(JSON.stringify(s));return l[o].settings[t].color=e,l})};return(0,l.jsxs)("div",{className:"flex flex-col justify-center gap-1",children:[(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex gap-2 justify-center items-center",children:(0,l.jsxs)("div",{className:"flex flex-col gap-1 h-[15vh]",children:[(0,l.jsx)("label",{className:"input bg-bg-verba input-sm input-bordered flex items-center gap-2 w-full",children:(0,l.jsx)("input",{type:"text",className:"grow",placeholder:t,value:n[o].settings[t].color,onChange:e=>{a(e.target.value)}})}),(0,l.jsx)(y.gW,{color:n[o].settings[t].color,onChange:e=>{a(e)}})]})})]},t)},C=e=>{let{title:t,SelectSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("select",{value:n[o].settings[t].value,onChange:e=>{let s=e.target.value;r(e=>{let l=JSON.parse(JSON.stringify(e));return l[o].settings[t].value=s,l})},className:"select bg-bg-verba",children:s.options.map(e=>(0,l.jsx)("option",{children:e},"Select_"+e))})})]},t)},w=e=>{let{title:t,CheckboxSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("input",{type:"checkbox",className:"toggle",checked:n[o].settings[t].checked,onChange:e=>{let s=e.target.checked;r(e=>{let l=JSON.parse(JSON.stringify(e));return l[o].settings[t].checked=s,l})}})})]},t)},S=e=>{let{title:t,NumberFieldSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"number",className:"grow",placeholder:t,value:n[o].settings[t].value,onChange:e=>{let s=e.target.value;r(e=>{let l=JSON.parse(JSON.stringify(e));return l[o].settings[t].value=s,l})}})})})]},t)},_=e=>{let{Icon:t,iconSize:s,title:o,currentSetting:n,setSetting:r,setSettingString:a}=e;return(0,l.jsxs)("button",{className:"btn lg:btn-lg flex items-center justify-center border-none hover:bg-button-hover-verba ".concat(n===a?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{r(a)},children:[(0,l.jsx)(t,{size:s}),(0,l.jsx)("p",{className:"sm:hidden md:flex md:text-base lg:text-lg",children:o})]},o)},k=e=>{let{settingTemplate:t,setSettingTemplate:s,baseSetting:r,setBaseSetting:a}=e,[d,x]=(0,o.useState)("Customization"),[g,m]=(0,o.useState)(JSON.parse(JSON.stringify(r[t]))),[u,b]=(0,o.useState)(Object.keys(h));(0,o.useEffect)(()=>{b(Object.keys(h)),m(JSON.parse(JSON.stringify(r[t])))},[r,t]);let p=(e,t)=>{if(""===d)return null;switch(t.type){case"text":return(0,l.jsx)(v,{title:e,setting:d,TextFieldSetting:t,settingsConfig:g,setSettingsConfig:m});case"image":return(0,l.jsx)(j,{title:e,setting:d,ImageFieldSetting:t,settingsConfig:g,setSettingsConfig:m});case"check":return(0,l.jsx)(w,{title:e,setting:d,CheckboxSetting:t,settingsConfig:g,setSettingsConfig:m});case"select":return(0,l.jsx)(C,{title:e,setting:d,SelectSetting:t,settingsConfig:g,setSettingsConfig:m});case"color":return(0,l.jsx)(N,{title:e,setting:d,ColorSetting:t,settingsConfig:g,setSettingsConfig:m});case"number":return(0,l.jsx)(S,{title:e,setting:d,NumberFieldSetting:t,settingsConfig:g,setSettingsConfig:m});default:return null}};return(0,l.jsxs)("div",{className:"flex justify-between items-start gap-5",children:[(0,l.jsxs)("div",{className:"hidden lg:flex lg:flex-col gap-5 lg:w-1/4",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center gap-5",children:[(0,l.jsx)("p",{className:"md:text-base lg:text-lg text-text-alt-verba",children:"Settings"}),(0,l.jsxs)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-5 rounded-lg shadow-lg gap-2",children:[(0,l.jsx)(_,{Icon:i._TT,iconSize:20,title:"Personaliza Bernabo Bot",currentSetting:d,setSetting:x,setSettingString:"Customization"}),(0,l.jsx)(_,{Icon:n.utr,iconSize:20,title:"Configuraciones de chat",currentSetting:d,setSetting:x,setSettingString:"Chat"})]})]}),""!=d&&(0,l.jsxs)("div",{className:"sm:hidden md:flex flex-col justify-center items-center gap-5",children:[(0,l.jsx)("p",{className:" md:text-base lg:text-lg text-text-alt-verba",children:"Description"}),(0,l.jsx)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-5 rounded-lg shadow-lg gap-2",children:(0,l.jsxs)("p",{className:"sm:text-xs md:text-sm lg:text-base",children:[" ",h[t][d]?h[t][d].description:""]})})]})]}),(0,l.jsxs)("div",{className:"flex flex-col lg:justify-center justify-start lg:items-center items-start gap-5 w-full lg:w-3/4",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center w-full",children:[(0,l.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,l.jsx)("ul",{className:"menu menu-sm sm:menu-horizontal bg-base-200 rounded-box bg-bg-alt-verba z-40",children:(0,l.jsx)("li",{children:(0,l.jsxs)("details",{children:[(0,l.jsxs)("summary",{children:[(0,l.jsx)(c.bqP,{size:15})," Ajustes"]}),(0,l.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,l.jsx)("li",{onClick:()=>{x("Customization")},children:(0,l.jsx)("a",{children:"Personalizar Bernabo Bot"})}),(0,l.jsx)("li",{onClick:()=>{x("Chat")},children:(0,l.jsx)("a",{children:"Configuraciones de chat"})})]})]})})})}),(0,l.jsx)("p",{className:"sm:hidden md:flex text-lg text-text-alt-verba",children:"Configuracion"}),(0,l.jsx)("select",{value:t,onChange:e=>{s(e.target.value)},className:"select select-md lg:select-sm text-xs bg-bg-alt-verba text-text-verba",children:u.map(e=>(0,l.jsx)("option",{children:e},"Template"+e))})]}),(0,l.jsxs)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-10 rounded-lg shadow-lg h-[70vh] gap-2 overflow-y-scroll",children:[(0,l.jsx)("p",{className:"font-bold text-2xl lg:mb-5",children:d}),""!=d&&(0,l.jsxs)("div",{className:"lg:hidden flex flex-col items-start gap-5 mb-5",children:[(0,l.jsx)("p",{className:" md:text-base lg:text-lg text-text-alt-verba",children:"Descricion"}),(0,l.jsx)("div",{className:"flex flex-col w-full gap-2",children:(0,l.jsxs)("p",{className:"sm:text-xs md:text-sm lg:text-base",children:[" ",h[t][d]?h[t][d].description:""]})})]}),(0,l.jsx)("div",{className:" flex-coll gap-4 grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:d&&Object.entries(h[t][d].settings).map(e=>{let[t,s]=e;return p(t,s)})}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,l.jsxs)("button",{onClick:()=>{a(e=>{let s=JSON.parse(JSON.stringify(e));return s[t]=g,s})},className:"btn flex items-center justify-center border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba",children:[(0,l.jsx)(i.FJM,{}),(0,l.jsx)("p",{className:"",children:"Aplicar"})]}),(0,l.jsxs)("button",{onClick:()=>{m(JSON.parse(JSON.stringify(r[t])))},className:"btn flex items-center justify-center border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,l.jsx)(f.B4e,{}),(0,l.jsx)("p",{className:"",children:"Reiniciar"})]})]})]})]})]})},A=s(15560),T=s.n(A);let E=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/generate_stream")};var F=s(13921),O=s(44025),P=s(38666),R=e=>{let{message:t,handleCopyToBillboard:s,settingConfig:o}=e;return(0,l.jsxs)("div",{className:"flex items-end gap-2 ".concat("user"===t.type?"justify-end":"justify-start"),children:[(0,l.jsxs)("div",{className:"flex flex-col items-start p-4 rounded-xl animate-press-in shadow-md sm:text-sm md:text-base ".concat("user"===t.type?"bg-primary-verba":"bg-bg-verba"),children:[t.cached&&(0,l.jsx)(i.i1q,{size:12,className:"text-text-verba"}),"system"===t.type?(0,l.jsx)(F.D,{className:"prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:n,children:r,...a}=e,i=/language-(\w+)/.exec(n||"");return!s&&i?(0,l.jsx)(O.Z,{style:"dark"===o.Customization.settings.theme?P.vk:P.Yn,language:i[1],PreTag:"div",...a,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:n,...a,children:r})}},children:t.content}):(0,l.jsx)("div",{className:"whitespace-pre-wrap",children:t.content})]}),(0,l.jsx)("div",{className:"flex flex-col items-center justify-center",children:"system"===t.type&&(0,l.jsx)("button",{onClick:()=>s(t.content),className:"btn border-none shadow-none flex gap-1 bg-bg-alt-verba hover:bg-secondary-verba hover:text-text-verba text-text-alt-verba",children:(0,l.jsx)("p",{className:"text-xs",children:"Copy"})})})]})},I=s(61379),z=e=>{let{status:t,true_text:s,false_text:o}=e;return(0,l.jsx)("div",{className:"p-2 rounded-lg text-text-verba text-sm ".concat(t?"bg-secondary-verba":"bg-bg-alt-verba text-text-alt-verba"),children:(0,l.jsx)("p",{className:"text-xs ".concat(t?"text-text-verba":"text-text-alt-verba"),children:t?s:o})})},B=e=>{let{component_name:t,Icon:s,changeTo:o,changePage:n,disable:r}=e;return(0,l.jsxs)("button",{disabled:r,onClick:()=>n(o),className:"btn btn-sm w-full border-none p-2 rounded-lg text-text-verba text-sm bg-button-verba hover:bg-primary-verba }",children:[(0,l.jsx)("div",{className:"hidden md:flex",children:(0,l.jsx)(s,{size:15})}),(0,l.jsx)("p",{className:'text-xs "text-text-verba',children:t})]})},D=e=>{let{APIHost:t,settingConfig:s,setChunks:n,setChunkTime:r,setCurrentPage:i,setContext:c,production:d,RAGConfig:x}=e,[g,m]=(0,o.useState)(""),u=(0,o.useRef)(null),[b,p]=(0,o.useState)(null),[h,f]=(0,o.useState)(""),[v,j]=(0,o.useState)([]),[y,N]=(0,o.useState)(!1),[C,w]=(0,o.useState)("DONE"),[S,_]=(0,o.useState)(!1),[k,A]=(0,o.useState)([]),[F,O]=(0,o.useState)(!1),[P,D]=(0,o.useState)(""),[G,M]=(0,o.useState)("GOOD"),J=e=>{navigator.clipboard.writeText(e).then(function(){H("Copied message")},function(e){console.error("Unable to copy text: ",e)})},H=(e,t)=>{if(t?M("BAD"):M("GOOD"),F){D(e);return}D(e),O(!0),setTimeout(()=>{O(!1),D("")},3e3)};(0,o.useEffect)(()=>{j(q("VERBA_CONVERSATION")),n(X("VERBA_CHUNKS")),c($("VERBA_CONTEXT"));let e=E(),t=new WebSocket(e);return t.onopen=()=>{console.log("WebSocket connection opened to "+e),H("WebSocket Online")},t.onmessage=e=>{let t;try{t=JSON.parse(e.data)}catch(t){console.error("Received data is not valid JSON:",e.data);return}let s=t.message;if(m(e=>e+s),"stop"===t.finish_reason){N(!1),w("DONE");let e=t.full_text;if(t.cached){let s=t.distance;j(t=>[...t,{type:"system",content:e,cached:!0,distance:s}])}else j(t=>[...t,{type:"system",content:e}]);m("")}},t.onerror=e=>{console.error("WebSocket Error:",e),H("WebSocket Error: "+e,!0),N(!1),w("DONE")},t.onclose=e=>{e.wasClean?console.log("WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),H("WebSocket Connection Offline",!0),N(!1),w("DONE")},p(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[]),(0,o.useEffect)(()=>{v.length>1&&W("VERBA_CONVERSATION",v),u.current&&(v[v.length-1],u.current.scrollIntoView({behavior:"smooth"}))},[v]);let V=async e=>{f(e),A([])},L=(e,t)=>{if((null==b?void 0:b.readyState)===WebSocket.OPEN){let s=JSON.stringify({query:e,context:t,conversation:v});b.send(s)}else console.error("WebSocket is not open. ReadyState:",null==b?void 0:b.readyState)},W=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},U=(e,t)=>{localStorage.setItem(e,t)},q=e=>{{let t=localStorage.getItem(e);if(t&&JSON.parse(t).length>0)return JSON.parse(t)}return[{type:"system",content:s.Customization.settings.intro_message.text}]},Z=e=>{localStorage.removeItem(e)},K=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},X=e=>{try{{let t=localStorage.getItem(e);if(t&&JSON.parse(t).length>0)return JSON.parse(t)}}catch(e){console.error("Failed to load chunks from local storage:",e)}return[]},$=e=>{try{{let t=localStorage.getItem(e);if(t)return t}}catch(e){console.error("Failed to load context from local storage:",e)}return""},Q=e=>{localStorage.removeItem(e)},Y=async e=>{if(null==e||e.preventDefault(),A([]),null===t){H("No connection to server");return}if(!y&&h.trim()){j(e=>[...e,{type:"user",content:h}]),f("");let e=document.getElementById("reset");null!==e?(e.style.height="",e.style.width=""):console.error('The element with ID "target" was not found in the DOM.');try{N(!0),w("CHUNKS");let e=await fetch(t+"/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:h})}),s=await e.json();s?(""!==s.error&&H(s.error,!0),n(s.chunks),K("VERBA_CHUNKS",s.chunks),A([]),r(s.took),s.context&&(L(h,s.context),c(s.context),U("VERBA_CONTEXT",s.context),w("RESPONSE"))):(H("Failed to fetch from API: No data received",!0),N(!1),w("DONE"))}catch(e){console.error("Failed to fetch from API:",e),H("Failed to fetch from API: "+e,!0),N(!1),w("DONE")}}},ee=async e=>{if(S||""===e||y||!s.Chat.settings.suggestion.checked){A([]);return}try{_(!0);let s=await fetch(t+"/api/suggestions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}),l=await s.json();l&&A(l.suggestions),_(!1)}catch(e){console.error("Failed to fetch suggestions:",e),_(!1)}},et=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),es=(e,t)=>{let s=et(t),o=e.split(RegExp("(".concat(s,")"),"gi"));return(0,l.jsx)("div",{className:"flex flex-row gap-1",children:o.map((e,s)=>(0,l.jsx)("p",{className:e.toLowerCase()===t.toLowerCase()?"font-bold text-sm":"",children:e},s))})};return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-2 md:p-5 text-text-verba gap-5 h-[55vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex gap-1 md:gap-2 items-center",children:[x&&(0,l.jsx)("div",{className:"flex gap-2 items-center",children:(0,l.jsx)(B,{disable:d,component_name:x?x.Generator.selected:"",Icon:I.VB9,changeTo:"RAG",changePage:i})}),(0,l.jsx)("div",{className:"hidden sm:block md:h-[3vh] lg:h-[2vh] bg-text-alt-verba w-px mx-0 md:mx-1"}),(0,l.jsx)(z,{status:null!==t&&null!==b&&b.readyState===WebSocket.OPEN,true_text:"Online",false_text:"Connecting..."}),(0,l.jsx)(z,{status:s.Chat.settings.caching.checked,true_text:"Almacenamiento en cach\xe9",false_text:"No Caching"}),(0,l.jsx)(z,{status:s.Chat.settings.suggestion.checked,true_text:"Sugerencias",false_text:"No Suggestions"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[v.map((e,t)=>(0,l.jsx)("div",{ref:t===v.length-1?u:null,className:"mb-4 ".concat("user"===e.type?"text-right":""),children:(0,l.jsx)(R,{message:e,handleCopyToBillboard:J,settingConfig:s})},t)),g&&(0,l.jsx)(R,{settingConfig:s,message:{type:"system",content:g,cached:!1},handleCopyToBillboard:J})]}),y&&(0,l.jsxs)("div",{className:"flex items-center pl-4 mb-4 gap-3",children:[(0,l.jsx)(T(),{color:s.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsxs)("p",{children:["CHUNKS"===C&&"Retrieving chunks","RESPONSE"===C&&"Generating answer"]})]})]}),(0,l.jsx)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-5 min-h-[9.3vh]",children:(0,l.jsxs)("form",{className:"flex justify-between w-full items-center gap-3",onSubmit:Y,children:[(0,l.jsx)("textarea",{id:"reset",rows:1,cols:10,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Y(e))},value:h,onChange:e=>{f(e.target.value),ee(e.target.value)},className:" bg-bg-alt-verba textarea textarea-xs p-2 text-sm md:text-base w-full",placeholder:"Preg\xfantale cualquier cosa a ".concat(s.Customization.settings.title.text)}),(0,l.jsx)("button",{type:"submit",className:"btn btn-circle border-none shadow-none bg-bg-alt-verba hover:bg-secondary-verba",children:(0,l.jsx)(a.ghy,{size:18})}),(0,l.jsx)("div",{className:"tooltip text-text-verba","data-tip":"Reset Conversation",children:(0,l.jsx)("button",{type:"button",onClick:()=>{Z("VERBA_CONVERSATION"),Q("VERBA_CHUNKS"),Q("VERBA_CONTEXT"),n([]),j([{type:"system",content:s.Customization.settings.intro_message.text}]),f(""),A([]),c("")},className:"btn btn-circle border-none shadow-none bg-bg-alt-verba hover:bg-secondary-verba",children:(0,l.jsx)(a.oRX,{size:18})})})]})}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:k.map((e,t)=>(0,l.jsx)("button",{className:"btn sm:btn-sm md:btn-md border:none bg-button-verba hover:bg-button-hover-verba text-sm font-normal",onClick:()=>V(e),children:es(e,h)},t+e))}),(0,l.jsx)("div",{className:"animate-pop-in ".concat(F?"opacity-100":"opacity-0"," ").concat("GOOD"===G?"bg-secondary-verba":"bg-warning-verba"," text-text-verba p-3 rounded text-sm transition-opacity"),children:(0,l.jsx)("p",{children:P})})]})},G=s(77095),M=e=>{let{title:t,modal_id:s,text:o,triggerAccept:n,triggerString:r,triggerValue:a}=e;return(0,l.jsx)("dialog",{id:s,className:"modal",children:(0,l.jsxs)("div",{className:"modal-box",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:t}),(0,l.jsx)("p",{className:"whitespace-pre-wrap",children:o}),(0,l.jsx)("div",{className:"modal-action",children:(0,l.jsxs)("form",{method:"dialog",children:[n&&a&&r&&(0,l.jsx)("button",{className:"btn text-text-verba bg-primary-verba border-none hover:bg-button-hover-verba",onClick:()=>{n(a)},children:r}),(0,l.jsx)("button",{className:"btn text-text-verba bg-warning-verba border-none hover:bg-button-hover-verba ml-2",children:"Cancel"})]})})]})})},J=e=>{let{chunks:t,selectedChunk:s,chunkTime:r,context:a,setSelectedChunk:c,setCurrentPage:d,RAGConfig:x,production:g}=e;return(0,o.useEffect)(()=>{t&&t.length>0?c(t[0]):c(null)},[t]),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-3 md:h-[17vh] lg:h-[65vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex md:flex-col gap-5",children:[(0,l.jsx)("div",{className:"flex md:flex-row lg:flex-col gap-2 justify-center md:justify-start items-center",children:x&&(0,l.jsxs)("div",{className:"flex flex-row lg:flex-col gap-2 items-center lg:w-full",children:[(0,l.jsx)(B,{disable:g,component_name:x?x.Embedder.selected:"",Icon:i.i1q,changeTo:"RAG",changePage:d}),(0,l.jsx)(B,{disable:g,component_name:x?x.Retriever.selected:"",Icon:i.U41,changeTo:"RAG",changePage:d})]})}),t&&t.length>0&&(0,l.jsx)("div",{className:"sm:hidden md:flex items-center justify-center",children:(0,l.jsxs)("p",{className:"items-center justify-center text-text-alt-verba text-xs",children:[t.length," trozos recuperados en ",r," segundos."]})})]}),(0,l.jsxs)("div",{className:"flex sm:flex-row lg:flex-col gap-2",children:[t&&t.map((e,t)=>(0,l.jsxs)("button",{onClick:()=>c(e),className:"btn md:btn-base bg-button-verba hover:bg-button-hover-verba border-none lg:btn-lg sm:w-2/3 md:w-1/3 lg:w-full flex justify-start items-center gap-5 ".concat((null==s?void 0:s.chunk_id)===e.chunk_id&&s.doc_uuid===e.doc_uuid?"bg-secondary-verba":"bg-button-verba"," hover:button-hover-verba"),children:[(0,l.jsx)("div",{className:"tooltip text-xs","data-tip":"Score: ".concat(Math.round(100*e.score)),children:(0,l.jsx)("button",{className:"btn btn-xs border-none text-xs btn-circle lg:btn-sm bg-bg-alt-verba hover:bg-primary-verba flex md:text-sm lg:text-base",children:(0,l.jsx)(G.ZP,{end:t+1,className:"text-sm text-text-verba"})})}),(0,l.jsxs)("div",{className:"flex flex-col items-start truncate sm:w-1/2",children:[(0,l.jsx)("p",{className:"text-xs lg:text-sm text-text-verba",children:e.doc_name}),(0,l.jsx)("p",{className:"text-xs text-text-alt-verba",children:e.doc_type})]})]},e.doc_name+t)),""!==a&&(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("context_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn flex gap-2 w-full border-none bg-button-verba text-text-verba hover:bg-button-hover-verba",children:[(0,l.jsx)(n.UTX,{className:"text-text-verba"}),(0,l.jsx)("p",{className:"text-text-verba text-xs",children:"See Context"})]})]})]}),(0,l.jsx)(M,{modal_id:"context_modal",title:"Contexto utilizado",text:a})]})},H=s(21794),V=e=>{let{APIhost:t,selectedChunk:s,settingConfig:n,selectedDocument:r,deletable:a,setSelectedChunk:c,setDocuments:d,setTriggerReset:x,production:g}=e,[m,u]=(0,o.useState)(null),[b,p]=(0,o.useState)(null),[h,v]=(0,o.useState)(!1),[j,y]=(0,o.useState)(!1),N=(0,o.useRef)(null);(0,o.useEffect)(()=>{null!=s&&null!=t?C():u(null)},[s]);let C=async()=>{if(null!=s&&null!=t)try{v(!0);let e=await fetch(t+"/api/get_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document_id:s.doc_uuid})}),l=await e.json();l&&(""!==l.error?(u(null),console.error(l.error),p(null),v(!1),y(!1)):(u(l.document),p(function(e,t){if(null===t||""===t)return{beginning:e,substring:"",ending:""};let s=e.indexOf(t);if(-1===s)return{beginning:e,substring:"",ending:""};let l=s+t.length,o=e.substring(0,s),n=e.substring(s,l);return{beginning:o,substring:n,ending:e.substring(l)}}(l.document.text,s.text)),v(!1),N.current&&N.current.scrollIntoView({behavior:"smooth"}),""!==s.text&&l.document.text.length>n.Chat.settings.max_document_size.value?y(!1):y(!0)))}catch(e){console.error("Failed to fetch document:",e),v(!1)}},w=async e=>{try{console.log("DELETING "+e),fetch(t+"/api/delete_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document_id:e})}),u(null),c(null),d&&d(null),x&&x(e=>!e)}catch(e){console.error("Failed to delete document:",e)}};return null===m||h?(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsx)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg items-center justify-center shadow-lg p-5 text-text-verba gap-5 sm:h-[47vh] lg:h-[65vh] overflow-auto",children:h&&(0,l.jsxs)("div",{className:"flex items-center justify-center pl-4 mb-4 gap-3",children:[(0,l.jsx)(T(),{color:n.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Cargando documento..."})]})})}):(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-5 sm:h-[53.5vh] lg:h-[65vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"sm:text-sm md:text-lg font-semibold",children:m.name}),(0,l.jsx)("p",{className:"sm:text-xs md:text-sm text-text-alt-verba",children:m.type})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[b&&""!==b.substring&&(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("button",{onClick:()=>{y(e=>!e)},className:"btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba flex gap-2",children:[(0,l.jsx)(f.rQE,{}),(0,l.jsx)("p",{className:"sm:hidden md:flex text-xs text-text-verba",children:j?"Mostrar sólo contexto":"Mostrar documento completo"})]})}),""!==m.link&&(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("button",{onClick:()=>{window.open(null==m?void 0:m.link,"_blank","noopener,noreferrer")},className:"btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba flex gap-2",children:[(0,l.jsx)(i.CkN,{}),(0,l.jsx)("p",{className:"sm:hidden md:flex text-xs text-text-verba",children:"Ir a la fuente"})]})}),a&&!g&&(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("delete_document_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba flex gap-2",children:[(0,l.jsx)(f.ZkW,{}),(0,l.jsx)("p",{className:"sm:hidden md:flex text-xs text-text-verba",children:"Eliminar documento"})]})})]})]}),b&&(0,l.jsxs)("div",{className:"flex flex-col gap-5",children:[j&&""!==b.beginning&&(0,l.jsx)(F.D,{className:"prose max-w-prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:o,children:r,...a}=e,i=/language-(\w+)/.exec(o||"");return!s&&i?(0,l.jsx)(O.Z,{style:"dark"===n.Customization.settings.theme?P.vk:P.Yn,language:i[1],PreTag:"div",...a,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:o,...a,children:r})}},children:b.beginning}),""!==b.substring&&(0,l.jsxs)("div",{ref:N,className:" border-secondary-verba border-2 rounded-lg shadow-lg flex gap-2 flex-col p-3",children:[(0,l.jsx)("div",{className:"flex w-1/3",children:(0,l.jsxs)("div",{className:"p-2 flex gap-1 rounded-lg text-text-verba text-sm bg-secondary-verba }",children:[(0,l.jsx)(H.drw,{}),(0,l.jsx)("p",{className:"text-xs text-text-verba}",children:"Context Used"})]})}),(0,l.jsx)(F.D,{className:"prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:o,children:r,...a}=e,i=/language-(\w+)/.exec(o||"");return!s&&i?(0,l.jsx)(O.Z,{style:"dark"===n.Customization.settings.theme?P.vk:P.Yn,language:i[1],PreTag:"div",...a,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:o,...a,children:r})}},children:b.substring})]}),j&&""!==b.ending&&(0,l.jsx)(F.D,{className:"prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:o,children:r,...a}=e,i=/language-(\w+)/.exec(o||"");return!s&&i?(0,l.jsx)(O.Z,{style:"dark"===n.Customization.settings.theme?P.vk:P.Yn,language:i[1],PreTag:"div",...a,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:o,...a,children:r})}},children:b.ending})]}),(0,l.jsx)(M,{modal_id:"delete_document_modal",title:"Eliminar documento",text:"Quieres borrar "+m.name+"?",triggerString:"Delete",triggerValue:s?s.doc_uuid:"",triggerAccept:w})]})},L=e=>{let{settingConfig:t,tooltip_text:s,display_text:n,isAdmin:r,toggleAdmin:a}=e,[c,d]=(0,o.useState)(!1),[x,g]=(0,o.useState)("");return(0,l.jsxs)("div",{className:"relative items-center gap-2 ".concat(t.Chat.settings.info_button.checked?"flex":"hidden"),children:[(0,l.jsx)("button",{onClick:()=>d(!c),className:"btn btn-circle btn-sm border-none bg-bg-verba hover:bg-secondary-verba text-text-verba",children:(0,l.jsx)(i.LL$,{})}),c&&(0,l.jsxs)("div",{className:"absolute top-0 left-full translate-x-[-100%] ml-2 p-2 bg-white shadow-md rounded flex items-center",style:{minWidth:"400px",right:0},children:[(0,l.jsx)("input",{type:"password",value:x,onChange:e=>g(e.target.value),className:"input input-bordered input-sm flex-grow mr-1",placeholder:"Ingrese clave admin"}),(0,l.jsx)("button",{className:"btn btn-sm btn-primary ml-2",onClick:()=>{a(x),d(!1),g("")},children:"Cambiar Modo"})]}),(0,l.jsx)("div",{className:"tooltip tooltip-right text-xs","data-tip":s,children:(0,l.jsx)("p",{className:"text-sm text-text-alt-verba",children:n})})]})},W=s(44287),U=s.n(W),q=s(13184),Z=s.n(q),K=s(81364),X=s.n(K),$=s(26840),Q=s.n($);let Y={Inter:U(),Plus_Jakarta_Sans:Z(),Open_Sans:X(),PT_Mono:Q()};var ee=e=>{let{APIHost:t,settingConfig:s,setCurrentPage:n,RAGConfig:r,production:a,isAdmin:i,toggleAdmin:c}=e,[d,x]=(0,o.useState)([]),[g,m]=(0,o.useState)(""),[u,b]=(0,o.useState)(0),[p,h]=(0,o.useState)(null);return(0,l.jsxs)("div",{className:i?"flex sm:flex-col md:flex-row justify-between items-start md:gap-3":"fixed right-0 top-0 w-full md:w-1/3 h-full bg-white shadow-2xl z-100",children:[(0,l.jsxs)("div",{className:i?"sm:w-full md:w-1/2 lg:w-2/6 flex flex-col gap-2":"w-full flex flex-col gap-2 p-4",children:[(0,l.jsx)(L,{settingConfig:s,tooltip_text:"Utiliza la Interfaz de Chat para interactuar con tus datos. Tu consulta ser\xe1 utilizada para recuperar informaci\xf3n relevante y construir una respuesta. Puedes elegir entre diferentes Modelos de Lenguaje de Gran Tama\xf1o (LLM) para crear una respuesta.",display_text:"Interfaz de chat",isAdmin:i,toggleAdmin:c}),(0,l.jsx)(D,{setContext:m,production:a,RAGConfig:r,settingConfig:s,APIHost:t,setChunks:x,setChunkTime:b,setCurrentPage:n})]}),i&&(0,l.jsxs)("div",{className:"flex lg:flex-row sm:flex-col justify-between items-start sm:w-full md:w-1/2 lg:w-4/6 gap-3",children:[(0,l.jsxs)("div",{className:"sm:w-full lg:w-1/4 flex flex-col gap-2",children:[(0,l.jsx)(L,{settingConfig:s,tooltip_text:"Utiliza la Interfaz de Fragmentos para navegar por partes relevantes de tus datos, basadas en tu \xfaltima consulta. Puedes elegir entre diferentes t\xe9cnicas de incrustaci\xf3n y recuperaci\xf3n.",display_text:"Contexto relevante",isAdmin:i,toggleAdmin:c}),i&&(0,l.jsx)(J,{context:g,production:a,chunks:d,RAGConfig:r,selectedChunk:p,setSelectedChunk:h,chunkTime:u,setCurrentPage:n})]}),(0,l.jsxs)("div",{className:"sm:w-full lg:w-3/4 flex flex-col gap-2",children:[(0,l.jsx)(L,{settingConfig:s,tooltip_text:"Utiliza el Visor de Documentos para inspeccionar tus datos y los extractos de contexto que se utilizaron para generar respuestas a tus consultas. Puedes alternar entre mostrar el documento completo y solo mostrar el extracto espec\xedfico.",display_text:"Visor de documentos",isAdmin:i,toggleAdmin:c}),(0,l.jsx)(V,{production:a,setSelectedChunk:h,selectedChunk:p,APIhost:t,settingConfig:s,deletable:!1,selectedDocument:null})]})]})]})},et=e=>{let{APIHost:t,selectedDocument:s,settingConfig:n,setSelectedDocument:r,documents:c,setDocuments:d,triggerReset:x,setCurrentPage:g,RAGConfig:m,production:u}=e,[b,p]=(0,o.useState)(""),[h,f]=(0,o.useState)(1),[v,j]=(0,o.useState)(0),[y,N]=(0,o.useState)([]),[C,w]=(0,o.useState)(null),[S,_]=(0,o.useState)(null),[k,A]=(0,o.useState)(!1),E=async e=>{try{A(!0);let s=await fetch(t+"/api/get_all_documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e||"",doc_type:S||"",page:h,pageSize:100})}),l=await s.json();l&&(""!==l.error?(console.error(l.error),A(!1),d(null)):(d(l.documents),N(l.doc_types),w(l.current_embedder),j(l.took),A(!1)))}catch(e){console.error("Failed to fetch document:",e),A(!1)}};(0,o.useEffect)(()=>{null!=c&&null!=t?E(b):(d(null),A(!1))},[h,S]),(0,o.useEffect)(()=>{null!=t?E(b):(d(null),A(!1))},[x]);let F=()=>{E(b)},O=e=>{r({text:"",doc_name:e.name,chunk_id:0,doc_uuid:e.uuid,doc_type:e.type,score:0})};return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba md:gap-5 min-h-[15vh] md:min-h-[9.3vh]",children:(0,l.jsxs)("form",{className:"flex flex-col lg:flex-row w-full items-center justify-between gap-2 lg:gap-3",onSubmit:F,children:[(0,l.jsx)("textarea",{rows:1,cols:10,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),F())},value:b,onChange:e=>{p(e.target.value)},className:" bg-bg-alt-verba textarea textarea-xs p-2 text-sm md:text-base w-full",placeholder:"Search for documents"}),(0,l.jsxs)("div",{className:"flex justify-between items-center gap-2 lg:w-3/5",children:[(0,l.jsx)("div",{className:"flex w-full",children:(0,l.jsx)(B,{disable:u,component_name:m?m.Embedder.selected:"",Icon:i.i1q,changeTo:"RAG",changePage:g})}),(0,l.jsx)("button",{type:"button",onClick:F,className:"btn btn-sm md:btn-md btn-circle border-none shadow-none bg-bg-alt-verba hover:bg-secondary-verba",children:(0,l.jsx)(i.U41,{size:18})}),(0,l.jsx)("button",{type:"button",onClick:()=>{p(""),E("")},className:"btn btn-sm md:btn-md btn-circle border-none shadow-none bg-bg-alt-verba hover:bg-secondary-verba",children:(0,l.jsx)(a.oRX,{size:18})})]})]})}),(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-3 sm:h-[35vh] md:h-[40vh] lg:h-[55vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsxs)("select",{value:S||"All",onChange:e=>{_("All"===e.target.value?null:e.target.value)},className:"select select-sm bg-bg-verba",children:[(0,l.jsx)("option",{children:"All"},"Select_None"),y.map(e=>(0,l.jsx)("option",{children:e},"Select_"+e))]})}),(0,l.jsxs)("div",{className:"join justify-center items-center text-text-verba",children:[h>1&&(0,l.jsx)("button",{onClick:()=>{c&&(1==h?f(1):f(e=>e-1))},className:"join-item btn btn-sm border-none bg-button-verba hover:bg-secondary-verba",children:"\xab"}),(0,l.jsxs)("button",{className:"join-item btn btn-sm border-none bg-button-verba hover:bg-secondary-verba",children:["Page ",h]}),c&&c.length>=100&&(0,l.jsx)("button",{onClick:()=>{c&&(c.length<100?f(1):f(e=>e+1))},className:"join-item btn btn-sm border-none bg-button-verba hover:bg-secondary-verba",children:"\xbb"})]})]}),c&&c.length>0&&(0,l.jsx)("div",{className:"sm:hidden md:flex items-center justify-center",children:(0,l.jsxs)("p",{className:"items-center justify-center text-text-alt-verba text-xs",children:[c.length," documentos recuperados en ",v," segundos with ",C,"."]})}),(0,l.jsx)("div",{className:"gap-2 grid grid-cols-1 lg:grid-cols-2",children:c&&c.map((e,t)=>(0,l.jsx)("button",{onClick:()=>O(e),className:"btn md:btn-md lg:btn-lg w-full flex justify-start gap-4 ".concat(s&&s.doc_uuid===e.uuid?"bg-secondary-verba":"bg-button-verba"," hover:button-hover-verba"),children:(0,l.jsxs)("div",{className:"flex flex-col items-start truncate",children:[(0,l.jsx)("p",{className:"text-xs lg:text-sm text-text-verba",children:e.name}),(0,l.jsx)("p",{className:"text-xs text-text-alt-verba",children:e.type})]})},e.name+t))}),k&&(0,l.jsxs)("div",{className:"flex items-center justify-center pl-4 mb-4 gap-3",children:[(0,l.jsx)(T(),{color:n.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Cargando Documento"})]})]})]})},es=e=>{let{APIHost:t,settingConfig:s,setCurrentPage:n,RAGConfig:r,production:a}=e,[i,c]=(0,o.useState)([]),[d,x]=(0,o.useState)(0),[g,m]=(0,o.useState)(null),[u,b]=(0,o.useState)(!1);return(0,l.jsxs)("div",{className:"flex sm:flex-col md:flex-row justify-center items-start gap-3 ",children:[(0,l.jsx)("div",{className:"sm:w-full md:w-2/4",children:(0,l.jsx)(et,{production:a,RAGConfig:r,setCurrentPage:n,triggerReset:u,documents:i,setDocuments:c,APIHost:t,setSelectedDocument:m,settingConfig:s,selectedDocument:g})}),(0,l.jsx)("div",{className:"sm:w-full md:w-2/4",children:(0,l.jsx)(V,{production:a,setTriggerReset:b,deletable:!0,setDocuments:c,setSelectedChunk:m,selectedChunk:g,APIhost:t,settingConfig:s,selectedDocument:null})})]})},el=e=>{let{title:t,value:s,checked:o}=e;return(0,l.jsx)("div",{className:"flex p-3 rounded-lg ".concat(o?"bg-secondary-verba":"bg-bg-verba"),children:(0,l.jsxs)("div",{className:"flex gap-2 text-text-verba items-center",children:[(0,l.jsx)("p",{children:t}),(0,l.jsx)("div",{className:"text-xs lg:text-sm text-text-verba",children:null!==s?(0,l.jsx)("p",{children:s}):(0,l.jsx)("p",{children:o?"Disponible":"No Disponible"})})]})})},eo=e=>{let{type:t,connected:s,isFetching:o,schemas:n,settingConfig:r,reset_verba:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-6 h-[65vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex lg:flex-row flex-col gap-2",children:[(0,l.jsx)("p",{className:"text-text-verba font-bold text-lg",children:"Consola de administraci\xf3n"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(z,{status:null!==t,true_text:t||"",false_text:t||""}),(0,l.jsx)(z,{status:"Online"===s,true_text:s,false_text:"Conectando.."})]})]}),o&&(0,l.jsxs)("div",{className:"flex items-center justify-center pl-4 mb-4 gap-3",children:[(0,l.jsx)(T(),{color:r.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Cargando estad\xedsticas"})]}),"Online"===s&&(0,l.jsxs)("div",{className:"gap-2 grid grid-cols-2",children:[(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_verba_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba border-none hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(f.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Reset Verba"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_documents_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba border-none hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(f.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Restablecer documentos"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_cache_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba border-none hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(f.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Restablecer cach\xe9"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_suggestions_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba border-none hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(f.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Restablecer sugerencia"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_config_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba border-none hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(f.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Restablecer configuraci\xf3n"})]})]}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:n&&Object.entries(n).map(e=>{let[t,s]=e;return(0,l.jsx)(el,{title:t,value:s,checked:!1},t+"SCHEMA")})})]}),(0,l.jsx)(M,{modal_id:"reset_verba_modal",title:"Reset Bernabo Bot",text:"\xbfQuieres eliminar todos los datos de Bernabo Bot?",triggerString:"Reiniciar",triggerValue:"VERBA",triggerAccept:a}),(0,l.jsx)(M,{modal_id:"reset_documents_modal",title:"Reset Documents",text:"\xbfQuieres eliminar todos los documentos?",triggerString:"Reiniciar",triggerValue:"DOCUMENTS",triggerAccept:a}),(0,l.jsx)(M,{modal_id:"reset_cache_modal",title:"Restablecer cach\xe9",text:"\xbfQuieres eliminar todos los datos almacenados en cach\xe9?",triggerString:"Reiniciar",triggerValue:"CACHE",triggerAccept:a}),(0,l.jsx)(M,{modal_id:"reset_suggestions_modal",title:"Restablecer sugerencias",text:"\xbfQuieres eliminar todas las sugerencias de autocompletar?",triggerString:"Reiniciar",triggerValue:"SUGGESTIONS",triggerAccept:a}),(0,l.jsx)(M,{modal_id:"reset_config_modal",title:"Reset Configuration",text:"Restablecer configuraci\xf3n",triggerString:"Reiniciar",triggerValue:"CONFIG",triggerAccept:a})]})},en=e=>{let{title:t,status:s,isFetching:o,settingConfig:n}=e;return(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-6 h-[65vh] overflow-auto",children:[(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsx)("p",{className:"text-text-verba font-bold text-lg",children:t})}),o&&(0,l.jsx)("div",{className:"flex items-center justify-center pl-4 mb-4 gap-3",children:(0,l.jsx)(T(),{color:n.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75})}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:s&&Object.entries(s).map(e=>{let[t,s]=e;return(0,l.jsx)(el,{title:t,value:null,checked:s},"Status_"+t)})})]})})},er=e=>{let{APIHost:t,settingConfig:s,fetchHost:n}=e,[r,a]=(0,o.useState)(null),[i,c]=(0,o.useState)("Offline"),[d,x]=(0,o.useState)(null),[g,m]=(0,o.useState)(null),[u,b]=(0,o.useState)(null),[p,h]=(0,o.useState)(!1);(0,o.useEffect)(()=>{null!=t?f():(console.warn("Missing API Host for retrieving status"),c("Offline"),a(null),x(null),m(null),b(null),h(!1))},[]);let f=async()=>{if(t)try{h(!0);let e=await fetch(t+"/api/get_status",{method:"GET"}),s=await e.json();s?(s.error&&console.log(s.error),a(s.type),c("Online"),x(s.libraries),m(s.variables),b(s.schemas),h(!1)):console.warn("Status could not be retrieved")}catch(e){console.error("Failed to fetch document:",e),c("Offline"),a(null),x(null),m(null),b(null),h(!1)}},v=e=>{localStorage.removeItem(e)},j=async e=>{try{a(null),x(null),m(null),b(null),h(!0),v("VERBA_CONVERSATION"),v("VERBA_CHUNKS"),v("VERBA_CONTEXT"),await fetch(t+"/api/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetMode:e})})&&(await n(),await f())}catch(e){console.error("Failed to delete document:",e)}};return(0,l.jsxs)("div",{className:"flex sm:flex-col md:flex-row justify-center items-start gap-3 ",children:[(0,l.jsx)("div",{className:"w-full md:w-1/3",children:(0,l.jsx)(eo,{reset_verba:j,settingConfig:s,type:r,isFetching:p,connected:i,schemas:u})}),(0,l.jsx)("div",{className:"w-full md:w-1/3",children:(0,l.jsx)(en,{settingConfig:s,title:"Libraries",isFetching:p,status:d})}),(0,l.jsx)("div",{className:"w-full md:w-1/3",children:(0,l.jsx)(en,{settingConfig:s,title:"Variables",isFetching:p,status:g})})]})},ea=e=>{let{title:t,TextFieldSetting:s,RAGConfig:o,RAGConfigTitle:n,RAGComponentTitle:r,setRAGConfig:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center lg:text-base text-sm",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full lg:text-base text-sm bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow",placeholder:t,value:o[n].components[r].config[t].text,onChange:e=>{let s=e.target.value;a(e=>{let l=JSON.parse(JSON.stringify(e));return console.log(l[n].components[r]),l[n].components[r].config[t].text=s,l})}})})})]},t)},ei=e=>{let{title:t,NumberFieldSetting:s,RAGConfig:o,RAGConfigTitle:n,RAGComponentTitle:r,setRAGConfig:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center lg:text-base text-sm",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full lg:text-base text-sm bg-bg-verba",children:(0,l.jsx)("input",{type:"number",className:"grow",placeholder:t,value:o[n].components[r].config[t].value,onChange:e=>{let s=e.target.value;a(e=>{let l=JSON.parse(JSON.stringify(e));return console.log(l[n].components[r]),l[n].components[r].config[t].value=s,l})}})})})]},t)},ec=e=>{let{APIHost:t,files:s,settingConfig:n,textValues:r,RAGConfig:a,RAGConfigTitle:c,RAGComponents:d,setRAGConfig:x,setFiles:g,setTextValues:m}=e,[u,b]=(0,o.useState)(r?r[0]:""),p=e=>{x(t=>{let s=JSON.parse(JSON.stringify(t));return s[c].selected=e,s})},h=(e,t)=>{if(!a)return null;switch(t.type){case"text":return(0,l.jsx)(ea,{title:e,RAGConfig:a,TextFieldSetting:t,RAGComponentTitle:d.selected,RAGConfigTitle:c,setRAGConfig:x});case"number":return(0,l.jsx)(ei,{title:e,RAGConfig:a,NumberFieldSetting:t,RAGComponentTitle:d.selected,RAGConfigTitle:c,setRAGConfig:x});default:return null}};return(0,l.jsx)("div",{className:"flex sm:flex-col md:flex-row justify-center items-start gap-3 w-full",children:(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-5 h-[65vh] overflow-auto w-full",children:[(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsxs)("p",{className:"text-lg",children:["Seleccione un ",c]})}),(0,l.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2",children:d&&Object.entries(d.components).map(e=>{let[t,s]=e;return(0,l.jsx)("button",{disabled:!s.available,onClick:()=>{p(t)},className:"btn border-none ".concat(s.available?"flex":"hidden"," ").concat(t===d.selected?"bg-secondary-verba text-text-verba":"bg-button-verba text-text-alt-verba"," hover:bg-button-hover-verba "),children:(0,l.jsx)("p",{children:t})},"Component_"+t)})}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsxs)("div",{className:"flex lg:flex-row flex-col gap-1",children:[(0,l.jsx)("p",{className:"lg:text-base text-xs",children:"You selected: "}),(0,l.jsx)("p",{className:"font-bold lg:text-base text-sm",children:d.selected})]}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba",children:d.components[d.selected].description})]}),(0,l.jsx)("div",{className:" flex-col gap-4 grid grid-cols-1 lg:grid-cols-1",children:a&&Object.entries(d.components[d.selected].config).map(e=>{let[t,s]=e;return h(t,s)})}),"UPLOAD"===d.components[d.selected].type&&(0,l.jsxs)("div",{className:"flex lg:flex-row flex-col gap-3",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("button",{onClick:()=>{var e;return null===(e=document.getElementById(c+d.selected+"_upload"))||void 0===e?void 0:e.click()},className:"btn border-none bg-button-verba hover:bg-secondary-verba text-text-verba",children:"Add Files"}),(0,l.jsx)("input",{id:c+d.selected+"_upload",type:"file",value:s?void 0:"",onChange:e=>{e.target.files&&e.target.files[0]&&g(e.target.files)},className:"hidden",multiple:!0})]}),s&&(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)("button",{onClick:()=>{g(null)},className:"btn text-sm border-none bg-warning-verba hover:bg-button-hover-verba ",children:"Borrar archivos"})})]}),s&&(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("p",{className:"flex text-text-alt-verba text-sm ",children:"Files:"}),(0,l.jsx)("div",{className:"flex flex-col gap-1 overflow-y-auto h-[15vh] border-2 p-2 rounded-lg border-bg-verba",children:s&&Array.from(s).map((e,t)=>(0,l.jsx)("p",{children:e.name},t+e.name))})]})]}),"URL"===d.components[d.selected].type&&(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:r.length>0&&u!==r[0]||""!=u&&r.length<=0?(0,l.jsx)("p",{children:"*Introducir URL"}):(0,l.jsx)("p",{children:"Introducir URL"})}),(0,l.jsxs)("div",{className:"flex flex-row gap-2 w-full items-center justify-center",children:[(0,l.jsx)("div",{className:"flex flex-col items-center justify-center gap-1 w-full",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow",value:u,onChange:e=>{b(e.target.value)}})})}),(0,l.jsx)("button",{onClick:()=>{m([u])},className:"btn bg-bg-verba border-none hover:bg-secondary-verba",children:(0,l.jsx)(i.l_A,{})})]})]}),(0,l.jsx)("div",{})]})})},ed=e=>{let{APIHost:t,setCurrentPage:s,settingConfig:n,RAGConfig:r,setRAGConfig:a,showComponents:c,buttonTitle:d,baseSetting:x,settingTemplate:g}=e,[m,u]=(0,o.useState)(JSON.parse(JSON.stringify(r))),[b,p]=(0,o.useState)(null),[h,v]=(0,o.useState)([]),[j,y]=(0,o.useState)(!1),[N,C]=(0,o.useState)([]),w=async()=>{if(y(!0),!b&&h.length<=0){y(!1);return}try{_("INFO","Importing...");let e=b?await Promise.all(Array.from(b).map(e=>new Promise((t,s)=>{let l=new FileReader;l.onload=()=>{let s=function(e){let t="",s=new Uint8Array(e),l=s.byteLength;for(let e=0;e<l;e++)t+=String.fromCharCode(s[e]);return btoa(t)}(l.result),o=e.name;t({filename:o,extension:e.name.split(".").pop()||"",content:s})},l.onerror=()=>s(l.error),l.readAsArrayBuffer(e)}))):[];if(p(null),e){let s=await fetch(t+"/api/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:{RAG:m,SETTING:{selectedTheme:g,themes:x}},data:e,textValues:h})}),l=await s.json();if(l){for(let e=0;e<l.logging.length;e++)C(t=>[...t,l.logging[e]]);y(!1)}else y(!1)}else y(!1)}catch(e){console.error("Failed to fetch from API:",e),y(!1)}},S=async()=>{if(t){y(!0);try{let e=await fetch(t+"/api/set_config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:{RAG:m,SETTING:{selectedTheme:g,themes:x}}})}),s=await e.json();s&&console.log(s),y(!1)}catch(e){console.error("Failed to fetch from API:",e),y(!1)}}},_=(e,t)=>{let s={type:e,message:t};C(e=>[...e,s])};return(0,l.jsxs)("div",{className:"flex sm:flex-col md:flex-row justify-between gap-3 ",children:[m&&Object.entries(m).map(e=>{let[s,o]=e;return c.includes(s)&&(0,l.jsx)("div",{className:"w-full md:w-1/4",children:(0,l.jsx)(ec,{textValues:h,setTextValues:v,files:b,setFiles:p,settingConfig:n,APIHost:t,RAGConfig:m,RAGConfigTitle:s,RAGComponents:o,setRAGConfig:u},s)},"RAGButton_"+s)}),m?(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4 items-end",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 w-full",children:[(0,l.jsx)("button",{disabled:j,onClick:()=>{a(m),"Import"===d?w():(S(),s("CHAT"))},className:"btn w-1/2 btn-lg text-base flex gap-2 bg-secondary-verba hover:bg-button-hover-verba text-text-verba",children:j?(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(T(),{color:n.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75})})}):(0,l.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[(0,l.jsx)(i.Xur,{}),d,b&&(0,l.jsxs)("p",{className:"text-sm",children:["(",b.length,")"]})]})}),(0,l.jsxs)("button",{disabled:j,onClick:()=>{u(JSON.parse(JSON.stringify(r))),C([]),v([]),p(null)},className:"btn w-1/2 btn-lg text-base text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,l.jsx)(f.B4e,{}),"Limpiar"]})]}),"Import"===d&&N.length>0&&(0,l.jsx)("div",{className:"bg-bg-console-verba h-[58vh] overflow-auto w-full p-5 flex flex-col gap-1 rounded-lg",children:N&&N.map((e,t)=>(0,l.jsx)("pre",{className:"text-xs font-mono ".concat("INFO"===e.type?"text-text-console-verba":"WARNING"===e.type?"text-primary-verba":"SUCCESS"===e.type?"text-secondary-verba":"ERROR"===e.type?"text-warning-verba":""),children:(0,l.jsxs)("code",{children:["(",e.type,") ",e.message]})},"console_message_"+t))})]}):(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)(T(),{color:n.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Loading Components..."})]})})]})};let ex=async()=>{let e=async e=>{try{let t=await fetch(e);if(!t.ok)throw Error("HTTP status ".concat(t.status));return!0}catch(t){return console.error("Failed to fetch from ".concat(e,":"),t),!1}};if(await e("http://localhost:8000/api/health"))return"http://localhost:8000";if(await e("/api/health"))return"";throw Error("Both health checks failed, please check the Verba Server")};var eg=s(9881),em=()=>{var e;let[t,s]=(0,o.useState)(!1),[n,r]=(0,o.useState)("CHAT"),[a,i]=(0,o.useState)(!1),[c,d]=(0,o.useState)(""),[x,g]=(0,o.useState)("Default"),[u,b]=(0,o.useState)(null),p=u?u[x].Customization.settings.font.value:null,f=p&&(null===(e=Y[p])||void 0===e?void 0:e.className)||"",[v,j]=(0,o.useState)(null),[y,N]=(0,o.useState)(null),C=async()=>{try{let e=await ex();if(N(e),""===e||"http://localhost:8000"===e)try{let t=await fetch(e+"/api/health",{method:"GET"}),s=await t.json();s?(i(s.production),d(s.gtag)):console.warn("Could not retrieve health data");let l=await fetch(e+"/api/config",{method:"GET"}),o=await l.json();o?(o.error&&console.error(o.error),o.data.RAG&&j(o.data.RAG),o.data.SETTING.themes?(b(o.data.SETTING.themes),g(o.data.SETTING.selectedTheme)):(b(h),g("Default"))):console.warn("Configuration could not be retrieved")}catch(e){console.error("Failed to fetch configuration:",e),j(null)}}catch(e){console.error("Error detecting host:",e),N(null)}};(0,o.useEffect)(()=>{C()},[]);let w=async()=>{if(y&&u)try{await fetch(y+"/api/set_config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:{RAG:v,SETTING:{selectedTheme:x,themes:u}}})})}catch(e){console.error("Failed to update config:",e)}};return(0,o.useEffect)(()=>{w()},[u,x]),(0,o.useEffect)(()=>{u&&(document.documentElement.style.setProperty("--primary-verba",u[x].Customization.settings.primary_color.color),document.documentElement.style.setProperty("--secondary-verba",u[x].Customization.settings.secondary_color.color),document.documentElement.style.setProperty("--warning-verba",u[x].Customization.settings.warning_color.color),document.documentElement.style.setProperty("--bg-verba",u[x].Customization.settings.bg_color.color),document.documentElement.style.setProperty("--bg-alt-verba",u[x].Customization.settings.bg_alt_color.color),document.documentElement.style.setProperty("--text-verba",u[x].Customization.settings.text_color.color),document.documentElement.style.setProperty("--text-alt-verba",u[x].Customization.settings.text_alt_color.color),document.documentElement.style.setProperty("--button-verba",u[x].Customization.settings.button_color.color),document.documentElement.style.setProperty("--button-hover-verba",u[x].Customization.settings.button_hover_color.color),document.documentElement.style.setProperty("--bg-console-verba",u[x].Customization.settings.bg_console.color),document.documentElement.style.setProperty("--text-console-verba",u[x].Customization.settings.text_console.color))},[u,x]),(0,l.jsxs)("main",{className:t?"min-h-screen p-5 bg-bg-verba text-text-verba ".concat(f):"fixed inset-0 overflow-y-auto bg-white bg-opacity-75 ".concat(f),"data-theme":u?u[x].Customization.settings.theme:"light",children:[""!==c&&(0,l.jsx)(eg.GoogleAnalytics,{gaId:c}),u?(0,l.jsxs)("div",{children:[t&&(0,l.jsx)(m,{APIHost:y,production:a,title:u[x].Customization.settings.title.text,subtitle:u[x].Customization.settings.subtitle.text,imageSrc:u[x].Customization.settings.image.src,version:"v1.0.1",currentPage:n,setCurrentPage:r}),"CHAT"===n&&(0,l.jsx)(ee,{production:a,settingConfig:u[x],APIHost:y,RAGConfig:v,setCurrentPage:r,isAdmin:t,toggleAdmin:e=>{"1234"===e&&s(!t)}}),t&&"DOCUMENTS"===n&&(0,l.jsx)(es,{RAGConfig:v,production:a,setCurrentPage:r,settingConfig:u[x],APIHost:y}),t&&"STATUS"===n&&!a&&(0,l.jsx)(er,{fetchHost:C,settingConfig:u[x],APIHost:y}),t&&"ADD"===n&&!a&&(0,l.jsx)(ed,{baseSetting:u,settingTemplate:x,buttonTitle:"Import",settingConfig:u[x],APIHost:y,RAGConfig:v,setRAGConfig:j,setCurrentPage:r,showComponents:["Reader","Chunker","Embedder"]}),t&&"RAG"===n&&!a&&(0,l.jsx)(ed,{baseSetting:u,settingTemplate:x,buttonTitle:"Save",settingConfig:u[x],APIHost:y,RAGConfig:v,setRAGConfig:j,setCurrentPage:r,showComponents:["Embedder","Retriever","Generator"]}),t&&"SETTINGS"===n&&!a&&(0,l.jsx)(k,{settingTemplate:x,setSettingTemplate:g,baseSetting:u,setBaseSetting:b}),t&&(0,l.jsx)("footer",{className:"footer footer-center p-4 mt-8 bg-bg-verba text-text-alt-verba",children:(0,l.jsx)("aside",{children:(0,l.jsx)("p",{children:"Build with ♥ and Caltion \xa9 2024"})})})]}):(0,l.jsxs)("div",{className:"flex items-center justify-center h-screen gap-2",children:[(0,l.jsx)(T(),{loading:!0,size:12,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Cargando Bernabo Bot"})]})]})}}},function(e){e.O(0,[429,582,33,190,400,61,982,420,712,558,971,23,744],function(){return e(e.s=8266)}),_N_E=e.O()}]);